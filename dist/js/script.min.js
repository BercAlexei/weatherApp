"use strict";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal"),t=document.querySelector(".btn_setting"),o=document.querySelector(".modal__window-close");t.addEventListener("click",t=>{t.preventDefault(),e.classList.add("active")}),o.addEventListener("click",t=>{t.preventDefault(),e.classList.remove("active")}),e.addEventListener("click",t=>{t.target===e&&e.classList.remove("active")}),document.addEventListener("keydown",t=>{"Escape"===t.code&&e.classList.remove("active")});const r=document.querySelector(":root"),n=(getComputedStyle(r),document.querySelector("#dark")),c=document.querySelector(".btn_submit"),a=document.querySelectorAll("[data-radio]");function d(){n.checked?(r.style.setProperty("--bg-color","#323232"),r.style.setProperty("--window-bg-color","#535353"),r.style.setProperty("--text-color","white"),r.style.setProperty("--bottom-color-not-active","#323232")):(r.style.setProperty("--bg-color","#F1F5FE"),r.style.setProperty("--window-bg-color","#ffffff"),r.style.setProperty("--text-color","black"),r.style.setProperty("--bottom-color-not-active","#EDEDED"))}localStorage.getItem("dark")&&(n.checked=!0),d(),a.forEach(e=>{e.addEventListener("click",d)}),c.addEventListener("click",t=>{t.preventDefault(),localStorage.getItem("dark")?localStorage.removeItem("dark"):localStorage.setItem("dark",!0),e.classList.remove("active")}),new Promise(e=>{navigator.geolocation.getCurrentPosition(t=>{e(t.coords)})}).then(({latitude:e,longitude:t}=item)=>{fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e.toFixed(2)}&lon=${t.toFixed(2)}&appid=42b9a336a38eb7423f252b2cae144b48&lang=ru&units=metric`).then(e=>e.json()).then(e=>{console.log(e),document.querySelector("h1").textContent=e.name,document.querySelector(".weather__now-temp").innerHTML=`${Math.round(e.main.temp)} &deg;C `,document.querySelector(".weather__now-icon img").setAttribute("src",`icons/weather/${e.weather[0].icon}.svg`),document.querySelector(".weather__now-descr-text").textContent=`${e.weather[0].description}`,document.querySelector(".weather__now-descr-feel span").innerHTML=`${Math.round(e.main.feels_like)} &deg;C `,document.querySelector(".weather__now-descr-wind span").textContent=`${Math.round(e.wind.speed)} `})})});